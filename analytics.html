<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics - ADYPU Notify</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      body {
        font-family: Poppins;
        margin: 0;
        padding: 0;
      }
      .main-content {
        margin-left: 270px;
        padding: 20px;
      }
      .chart-container {
        width: 100%;
        max-width: 800px;
        margin: 20px auto;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
      }

      th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }

      th {
        background-color: #6a11cb;
        color: white;
        font-weight: bold;
      }

      td {
        background-color: #f9f9f9;
      }

      /* Media Queries for Mobile Devices */
      @media (max-width: 768px) {
        body {
          padding: 10px;
        }
        .main-content {
          margin-left: 0; /* Remove left margin for mobile */
          padding: 10px;
        }
        h1 {
          font-size: 1.5rem;
        }
        table {
          font-size: 0.8rem;
          overflow-x: auto; /* Allow horizontal scrolling */
        }
        th, td {
          padding: 8px;
        }
        /* Ensure table scrolls horizontally on small screens */
        table {
          display: block;
          overflow-x: auto;
          white-space: nowrap;
        }
      }

      @media (max-width: 480px) {
        h1 {
          font-size: 1.2rem;
        }
        .main-content {
          padding: 5px;
        }
        table {
          font-size: 0.7rem;
        }
        th, td {
          padding: 5px;
        }
      }

      /* Add additional styling for very small screens */
      @media (max-width: 360px) {
        h1 {
          font-size: 1rem;
        }
        th, td {
          padding: 4px;
        }
        .sidebar {
          width: 200px; /* Reduce sidebar width */
        }
        .main-content {
          padding: 5px; /* Reduce padding */
        }
      }

    </style>
  </head>
  <body>

    <!-- Main Content Area -->
    <div class="main-content">
      <h1>Analytics</h1>
      <p>View detailed analytics of notifications sent across departments.</p>

      <!-- Chart Section -->
      <div class="chart-container">
        <canvas id="notificationChart"></canvas>
      </div>

      <!-- Table Section -->
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Message</th>
            <th>Department</th>
            <th>Recipient Email</th>
            <th>Date</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Exam Schedule Update</td>
            <td>The semester exams will begin on Dec 15.</td>
            <td>Examination Office</td>
            <td>examoffice@adypu.edu.in</td>
            <td>03/12/2023</td>
            <td>10:30 AM</td>
          </tr>
          <tr>
            <td>Library Hours Extension</td>
            <td>The library will now remain open till 9 PM.</td>
            <td>Library Staff</td>
            <td>library@adypu.edu.in</td>
            <td>02/12/2023</td>
            <td>11:15 AM</td>
          </tr>
          <tr>
            <td>Workshop on AI</td>
            <td>A workshop on Artificial Intelligence is scheduled for Dec 10.</td>
            <td>Research Department</td>
            <td>research@adypu.edu.in</td>
            <td>01/12/2023</td>
            <td>3:45 PM</td>
          </tr>
          <tr>
            <td>Placement Drive</td>
            <td>Infosys placement drive on Dec 20.</td>
            <td>Placement Department</td>
            <td>placement@adypu.edu.in</td>
            <td>29/11/2023</td>
            <td>9:00 AM</td>
          </tr>
          <tr>
            <td>Annual Sports Meet</td>
            <td>Sports meet scheduled for Jan 5-7.</td>
            <td>Sports Committee</td>
            <td>sports@adypu.edu.in</td>
            <td>28/11/2023</td>
            <td>2:15 PM</td>
          </tr>
          <tr>
            <td>Holiday Notification</td>
            <td>The university will remain closed on Dec 25 for Christmas.</td>
            <td>Administration</td>
            <td>admin@adypu.edu.in</td>
            <td>27/11/2023</td>
            <td>12:30 PM</td>
          </tr>
          <tr>
            <td>Faculty Meeting</td>
            <td>Monthly faculty meeting on Dec 5 at 10 AM.</td>
            <td>Dean's Office</td>
            <td>dean@adypu.edu.in</td>
            <td>26/11/2023</td>
            <td>4:00 PM</td>
          </tr>
          <tr>
            <td>Internship Opportunities</td>
            <td>New internship opportunities posted on the portal.</td>
            <td>Placement Department</td>
            <td>placement@adypu.edu.in</td>
            <td>25/11/2023</td>
            <td>1:45 PM</td>
          </tr>
          <tr>
            <td>Course Feedback</td>
            <td>Provide your feedback for the current semester courses.</td>
            <td>Academic Office</td>
            <td>academic@adypu.edu.in</td>
            <td>24/11/2023</td>
            <td>11:00 AM</td>
          </tr>
          <tr>
            <td>Blood Donation Camp</td>
            <td>Participate in the blood donation camp on Dec 12.</td>
            <td>Health Committee</td>
            <td>health@adypu.edu.in</td>
            <td>23/11/2023</td>
            <td>10:30 AM</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script>
      // Generate random data for the chart
      const departments = [
        "Vice Chancellor",
        "Dean",
        "Faculty Members",
        "Administrative Staff",
        "Technicians",
        "Placement Department",
        "Research and Development",
        "Library Staff",
        "Student Representatives",
      ];
      const notificationCounts = departments.map(() => Math.floor(Math.random() * 20) + 1);

      // Chart.js: Bar Chart
      const ctx = document.getElementById("notificationChart").getContext("2d");
      const notificationChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: departments,
          datasets: [
            {
              label: "Notifications Sent",
              data: notificationCounts,
              backgroundColor: "rgba(26, 188, 156, 0.5)",
              borderColor: "#1abc9c",
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });

      // Table: Populate with random data
      const tableBody = document.getElementById("notificationTableBody");
      const departmentsEmails = {
        "Vice Chancellor": "vc@adypu.edu.in",
        Dean: "dean@adypu.edu.in",
        "Faculty Members": "faculty@adypu.edu.in",
        "Administrative Staff": "admin@adypu.edu.in",
        Technicians: "tech@adypu.edu.in",
        "Placement Department": "placement@adypu.edu.in",
        "Research and Development": "rnd@adypu.edu.in",
        "Library Staff": "library@adypu.edu.in",
        "Student Representatives": "students@adypu.edu.in",
      };

      const generateRandomTime = () => {
        const hour = String(Math.floor(Math.random() * 12) + 1).padStart(2, "0");
        const minute = String(Math.floor(Math.random() * 60)).padStart(2, "0");
        const ampm = Math.random() > 0.5 ? "AM" : "PM";
        return `${hour}:${minute} ${ampm}`;
      };

      const generateRandomDate = () => {
        const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, "0");
        const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, "0");
        const year = 2023;
        return `${day}/${month}/${year}`;
      };

      for (let i = 0; i < 15; i++) {
        const department = departments[Math.floor(Math.random() * departments.length)];
        const email = departmentsEmails[department];
        const title = `Notification ${i + 1}`;
        const message = `This is a sample notification message ${i + 1}.`;
        const date = generateRandomDate();
        const time = generateRandomTime();

        const row = `<tr>
          <td>${title}</td>
          <td>${message}</td>
          <td>${department}</td>
          <td>${email}</td>
          <td>${date}</td>
          <td>${time}</td>
        </tr>`;
        tableBody.innerHTML += row;
      }
    </script>
  </body>
</html>
